<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Swiss Flag Component</title>

  <style>:root{--border:#e5e7eb;--text:#374151}body{color:var(--text);background-color:#fff;margin:0;padding:0;font-family:system-ui,-apple-system,sans-serif}#app{max-inline-size:600px;margin:2rem auto;padding:0 1rem}h1{text-align:center;margin-bottom:2rem}.controls-container{background:#f8f9fa;border-radius:12px;flex-direction:column;gap:1.5rem;margin-bottom:3rem;padding:1.5rem;display:flex;box-shadow:0 4px 6px -1px #0000001a}.primary-toggles{flex-wrap:wrap;justify-content:center;gap:1.5rem;display:flex}label{cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;gap:.5rem;display:flex}.size-control{margin-bottom:.5rem}.size-header{justify-content:space-between;margin-bottom:.5rem;font-size:.9rem;font-weight:500;display:flex}.size-value{color:#666}input[type=range]{inline-size:100%;display:block}.manual-settings-section{border-top:1px solid #e5e7eb;padding-top:1.5rem}.manual-controls{gap:1rem;padding-inline-start:.5rem;animation:.2s ease-out fadeIn;display:grid}.manual-label-header{justify-content:space-between;margin-bottom:.25rem;font-size:.85rem;display:flex}.manual-value{color:#666}.preset-message{color:#666;padding-inline-start:1.8rem;font-size:.9rem;font-style:italic}@keyframes fadeIn{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.credits{visibility:hidden;border:1px solid var(--border);inline-size:95%;box-shadow:0 2px 8px var(--border);color:var(--text);text-align:center;opacity:0;z-index:100;background-color:#ffffffe6;border-radius:8px;margin:0;padding:8px 16px;font-size:.9rem;transition:opacity .2s ease-in-out,visibility .2s;position:absolute;bottom:0;left:50%;transform:translate(-50%)translateY(50%)}swiss-flag:hover .credits,.credits:hover{visibility:visible;opacity:1;transition-delay:0s}swiss-flag{block-size:100%;inline-size:100%;margin-inline:auto;display:block}.code-sample-container{color:#e0e0e0;background:#2d2d2d;border-radius:8px;margin-top:2rem;padding:1.5rem;font-family:Consolas,Monaco,Andale Mono,monospace;font-size:.9rem;line-height:1.5;overflow-x:auto;box-shadow:0 4px 6px -1px #0000001a}.code-sample-container pre{margin:0}.token-tag{color:#569cd6}.token-attr-name{color:#9cdcfe}.token-attr-value{color:#ce9178}.token-punctuation{color:gray}.token-text{color:#d4d4d4}</style>
  <script type="module" crossorigin src="/assets/index-CVivyBBK.js"></script>
</head>

<body>
  <div id="app">
    <h1>Swiss Flag</h1>

    <div class="controls-container">
      <div class="primary-toggles">
        <label>
          <input type="checkbox" id="reduce-motion">
          Reduce Motion
        </label>
        <label>
          <input type="checkbox" id="no-animation">
          No Animation
        </label>
        <label>
          <input type="checkbox" id="show-slot" checked>
          Show Slot Content
        </label>
      </div>

      <div class="size-control">
        <div class="size-header">
          Size <span id="size-display" class="size-value">12rem</span>
        </div>
        <input type="range" id="size-slider" min="2" max="50" value="12">
      </div>

      <div class="manual-settings-section">
        <label style="margin-bottom: 1rem; font-weight: 500;">
          <input type="checkbox" id="override-animation">
          Override Animation Settings
        </label>

        <div id="manual-controls" class="manual-controls" style="display: none;">
          <div>
            <div class="manual-label-header">
              Animation Speed <span id="speed-display" class="manual-value">600ms</span>
            </div>
            <input type="range" id="speed-slider" min="100" max="3000" step="50" value="600">
          </div>

          <div>
            <div class="manual-label-header">
              Oscillation Distance <span id="distance-display" class="manual-value">2%</span>
            </div>
            <input type="range" id="distance-slider" min="0" max="10" step="0.1" value="2">
          </div>

          <div>
            <div class="manual-label-header">
              Stagger Delay <span id="stagger-display" class="manual-value">50ms</span>
            </div>
            <input type="range" id="stagger-slider" min="0" max="200" step="5" value="50">
          </div>
        </div>

        <div id="preset-message" class="preset-message">
          Using "Standard" preset (600ms speed, 2% distance, 50ms stagger)
        </div>
      </div>
    </div>

    <swiss-flag style="inline-size: 12rem;">
      <div class="credits">
        ðŸ‡¨ðŸ‡­ Swiss <a href="https://www.swissengineering.ch" target="_blank" rel="noopener noreferrer">Engineering</a>
      </div>
    </swiss-flag>

    <h3 style="margin-top: 3rem; text-align: center;">Code Sample</h3>
    <div class="code-sample-container">
      <pre><code id="code-sample"></code></pre>
    </div>

    <div style="text-align: center; margin-top: 4rem; font-size: 0.9rem; color: #666;">
      <a href="https://github.com/Khoding/swiss-flag" target="_blank"
        style="color: inherit; text-decoration: none; border-bottom: 1px solid #ccc;">
        View on GitHub and use the Swiss Flag Web Component in your projects!
      </a>
    </div>
  </div>


  <script>
    const state = {
      reduceAnimation: false,
      removeAnimation: false,
      showSlot: true,
      size: 12,
      overrideAnimation: false,
      speed: 600,
      distance: 2,
      stagger: 50
    };

    const reduceMotionCheckbox = document.getElementById('reduce-motion');
    const noAnimationCheckbox = document.getElementById('no-animation');
    const showSlotCheckbox = document.getElementById('show-slot');
    const sizeSlider = document.getElementById('size-slider');
    const sizeDisplay = document.getElementById('size-display');
    const overrideCheckbox = document.getElementById('override-animation');
    const manualControls = document.getElementById('manual-controls');
    const presetMessage = document.getElementById('preset-message');
    const speedSlider = document.getElementById('speed-slider');
    const speedDisplay = document.getElementById('speed-display');
    const distanceSlider = document.getElementById('distance-slider');
    const distanceDisplay = document.getElementById('distance-display');
    const staggerSlider = document.getElementById('stagger-slider');
    const staggerDisplay = document.getElementById('stagger-display');
    const swissFlag = document.querySelector('swiss-flag');
    const credits = document.querySelector('.credits');
    const codeSample = document.getElementById('code-sample');

    function highlightAttr(name, value) {
      if (value === undefined) {
        return `<span class="token-attr-name">${name}</span>`;
      }
      return `<span class="token-attr-name">${name}</span><span class="token-punctuation">=</span><span class="token-attr-value">"${value}"</span>`;
    }

    function updateCodeSample() {
      const attributes = [];
      attributes.push(highlightAttr('style', `inline-size: ${state.size}rem;`));

      if (state.reduceAnimation) attributes.push(highlightAttr('reduce-animation'));
      if (state.removeAnimation) attributes.push(highlightAttr('remove-animation'));

      if (state.overrideAnimation) {
        attributes.push(highlightAttr('animation-speed', state.speed));
        attributes.push(highlightAttr('oscillate-distance', `${state.distance}%`));
        attributes.push(highlightAttr('staggered-delay', state.stagger));
      }

      const attrString = attributes.length > 0 ? ' ' + attributes.join('\n  ') : '';

      const swissFlagOpen = `<span class="token-punctuation">&lt;</span><span class="token-tag">swiss-flag</span>${attrString}<span class="token-punctuation">&gt;</span>`;
      const swissFlagClose = `<span class="token-punctuation">&lt;/</span><span class="token-tag">swiss-flag</span><span class="token-punctuation">&gt;</span>`;

      const divAttr = highlightAttr('class', 'credits');
      const divOpen = `<span class="token-punctuation">&lt;</span><span class="token-tag">div</span> ${divAttr}<span class="token-punctuation">&gt;</span>`;
      const divClose = `<span class="token-punctuation">&lt;/</span><span class="token-tag">div</span><span class="token-punctuation">&gt;</span>`;

      const aAttrs = [
        highlightAttr('href', 'https://www.swissengineering.ch'),
        highlightAttr('target', '_blank'),
        highlightAttr('rel', 'noopener noreferrer')
      ].join(' ');
      const aOpen = `<span class="token-punctuation">&lt;</span><span class="token-tag">a</span> ${aAttrs}<span class="token-punctuation">&gt;</span>`;
      const aClose = `<span class="token-punctuation">&lt;/</span><span class="token-tag">a</span><span class="token-punctuation">&gt;</span>`;

      // Content
      let flagText = '';
      if (state.showSlot) {
        flagText = '\n  ' + divOpen + '\n    ðŸ‡¨ðŸ‡­ Swiss ' + aOpen + 'Engineering' + aClose + '\n  ' + divClose + '\n';
      }

      codeSample.innerHTML = swissFlagOpen + flagText + swissFlagClose;
    }

    function updateUI() {
      if (state.reduceAnimation) {
        swissFlag.setAttribute('reduce-animation', '');
      } else {
        swissFlag.removeAttribute('reduce-animation');
      }

      if (state.removeAnimation) {
        swissFlag.setAttribute('remove-animation', '');
      } else {
        swissFlag.removeAttribute('remove-animation');
      }

      if (state.overrideAnimation) {
        swissFlag.setAttribute('animation-speed', state.speed);
        swissFlag.setAttribute('oscillate-distance', state.distance + '%');
        swissFlag.setAttribute('staggered-delay', state.stagger);
        manualControls.style.display = 'grid';
        presetMessage.style.display = 'none';
      } else {
        swissFlag.removeAttribute('animation-speed');
        swissFlag.removeAttribute('oscillate-distance');
        swissFlag.removeAttribute('staggered-delay');
        manualControls.style.display = 'none';
        presetMessage.style.display = 'block';

        presetMessage.textContent = state.reduceAnimation
          ? 'Using "Reduced Motion" preset (900ms speed, 3% distance, 35ms stagger)'
          : 'Using "Standard" preset (600ms speed, 2% distance, 50ms stagger)';
      }

      swissFlag.style.inlineSize = `${state.size}rem`;
      sizeDisplay.textContent = `${state.size}rem`;

      speedDisplay.textContent = `${state.speed}ms`;
      distanceDisplay.textContent = `${state.distance}%`;
      staggerDisplay.textContent = `${state.stagger}ms`;

      if (state.showSlot) {
        if (!swissFlag.contains(credits)) {
          swissFlag.appendChild(credits);
        }
        credits.style.display = '';
      } else {
        if (swissFlag.contains(credits)) {
          credits.remove();
        }
      }

      updateCodeSample();
    }

    reduceMotionCheckbox.addEventListener('change', (e) => {
      const isChecked = e.target.checked;
      const wasRemoved = state.removeAnimation;
      state.removeAnimation = true;
      state.reduceAnimation = isChecked;
      updateUI();

      setTimeout(() => {
        state.removeAnimation = wasRemoved;
        updateUI();
      }, 10);
    });

    noAnimationCheckbox.addEventListener('change', (e) => {
      state.removeAnimation = e.target.checked;
      updateUI();
    });

    showSlotCheckbox.addEventListener('change', (e) => {
      state.showSlot = e.target.checked;
      updateUI();
    });

    sizeSlider.addEventListener('input', (e) => {
      state.size = e.target.value;
      updateUI();
    });

    overrideCheckbox.addEventListener('change', (e) => {
      state.overrideAnimation = e.target.checked;

      if (state.overrideAnimation && state.reduceAnimation) {
        state.speed = 900;
        state.distance = 3;
        state.stagger = 35;

        speedSlider.value = state.speed;
        distanceSlider.value = state.distance;
        staggerSlider.value = state.stagger;
      }

      updateUI();
    });

    speedSlider.addEventListener('input', (e) => {
      state.speed = Number(e.target.value);
      updateUI();
    });

    distanceSlider.addEventListener('input', (e) => {
      state.distance = Number(e.target.value);
      updateUI();
    });

    staggerSlider.addEventListener('input', (e) => {
      state.stagger = Number(e.target.value);
      updateUI();
    });

    const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');
    if (mediaQuery.matches) {
      // updateUI will handle this if we set defaults or if we read it here
      // For now, let's just respect the manual toggles starting at false/false
    }

    updateUI();
  </script>
</body>

</html>
